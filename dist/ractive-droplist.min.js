!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ractive"),require("ractive-decorators-popper")):"function"==typeof define&&define.amd?define(["ractive","ractive-decorators-popper"],t):"object"==typeof exports?exports.RactiveDroplist=t(require("ractive"),require("ractive-decorators-popper")):e.RactiveDroplist=t(e.Ractive,e.RactiveDecoratorsPopper)}(window,function(r,n){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(1),a=r.n(i);function N(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function s(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function F(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return s(r.overflowY,t)||s(r.overflowX,t)}return!1}function A(e,t,r,n,o,i,a,s){return i<e&&t<a||e<i&&a<t?0:i<=e&&s<=r||t<=a&&r<=s?i-e-n:t<a&&s<r||i<e&&r<s?a-t+o:0}var l=function(e,t){var r=t.scrollMode,n=t.block,o=t.inline,i=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof i?i:function(e){return e!==i};if(!N(e))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,d=[],u=e;N(u)&&s(u);){if((u=u.parentNode)===l){d.push(u);break}u===document.body&&F(u)&&!F(document.documentElement)||F(u,a)&&d.push(u)}for(var c=window.visualViewport?visualViewport.width:innerWidth,f=window.visualViewport?visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,v=e.getBoundingClientRect(),g=v.height,b=v.width,m=v.top,_=v.right,x=v.bottom,w=v.left,y="start"===n||"nearest"===n?m:"end"===n?x:m+g/2,k="center"===o?w+b/2:"end"===o?_:w,M=[],j=0;j<d.length;j++){var O=d[j],q=O.getBoundingClientRect(),C=q.height,E=q.width,W=q.top,P=q.right,R=q.bottom,S=q.left;if("if-needed"===r&&0<=m&&0<=w&&x<=f&&_<=c&&W<=m&&x<=R&&S<=w&&_<=P)return M;var H=getComputedStyle(O),T=parseInt(H.borderLeftWidth,10),D=parseInt(H.borderTopWidth,10),z=parseInt(H.borderRightWidth,10),B=parseInt(H.borderBottomWidth,10),I=0,L=0,U="offsetWidth"in O?O.offsetWidth-O.clientWidth-T-z:0,V="offsetHeight"in O?O.offsetHeight-O.clientHeight-D-B:0;if(l===O)I="start"===n?y:"end"===n?y-f:"nearest"===n?A(h,h+f,f,D,B,h+y,h+y+g,g):y-f/2,L="start"===o?k:"center"===o?k-c/2:"end"===o?k-c:A(p,p+c,c,T,z,p+k,p+k+b,b),I=Math.max(0,I+h),L=Math.max(0,L+p);else{I="start"===n?y-W-D:"end"===n?y-R+B+V:"nearest"===n?A(W,R,C,D,B+V,y,y+g,g):y-(W+C/2)+V/2,L="start"===o?k-S-T:"center"===o?k-(S+E/2)+U/2:"end"===o?k-P+z+U:A(S,P,E,T,z+U,k,k+b,b);var X=O.scrollLeft,Y=O.scrollTop;y+=Y-(I=Math.max(0,Math.min(Y+I,O.scrollHeight-C+V))),k+=X-(L=Math.max(0,Math.min(X+L,O.scrollWidth-E+U)))}M.push({el:O,top:I,left:L})}return M};function d(e){return e===Object(e)&&0!==Object.keys(e).length}var c=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(d(t)&&"function"==typeof t.behavior)return t.behavior(r?[]:l(e,t));if(!r){var n,o=!1===(n=t)?{block:"end",inline:"nearest"}:d(n)?n:{block:"start",inline:"nearest"};return function(e,o){void 0===o&&(o="auto");var i="scrollBehavior"in document.body.style;e.forEach(function(e){var t=e.el,r=e.top,n=e.left;t.scroll&&i?t.scroll({top:r,left:n,behavior:o}):(t.scrollTop=r,t.scrollLeft=n)})}(l(e,o),o.behavior)}};t.default=o.a.extend({template:{v:4,t:[{t:7,e:"div",m:[{n:"class",f:[{t:2,r:"class"}," droplist-container"],t:13},{n:"class-hidden",t:13,f:[{t:2,r:"fp.hidden"}]}],f:[{t:4,f:[{t:7,e:"label",m:[{n:"class",f:["oh nowrap-ellipsis ",{t:2,x:{r:["fp.required"],s:'_0?"required":""'}}],t:13}],f:[{t:2,r:"label"}]}],n:50,r:"label"}," ",{t:7,e:"input",m:[{n:"type",f:"text",t:13},{n:"name",f:[{t:2,r:"name"}],t:13},{n:"value",f:[{t:2,r:"value"}],t:13},{n:"class",f:"hidden-out-of-view",t:13},{n:"droplist-validator-field",f:0,t:13},{t:2,x:{r:["fp.required"],s:'_0?"required=\\"true\\" data-rule-not-zeros=\\"true\\"":""'}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"dropdown droplist",g:1},{n:"popper",t:71,f:{r:[],s:'[{placement:"bottom-start",enable_arrows:false}]'}}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"btn btn-sm btn-secondary w-100 text-left",g:1},{n:"type",f:"button",t:13,g:1},{n:"popper-trigger",f:0,t:13},{n:"aria-haspopup",f:"true",t:13,g:1},{n:"aria-expanded",f:[{t:2,x:{r:["menu_open"],s:'_0?"true":"false"'}}],t:13},{t:2,x:{r:["fp.disabled"],s:'_0?"disabled":""'}}],f:[{t:3,x:{r:["selected_text"],s:'_0?_0:"&nbsp;"'}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"dropdown-menu w-100 pb-1 pt-1",g:1},{n:"popper",f:0,t:13},{n:["popper_before_open"],t:70,f:""},{n:["popper_open"],t:70,f:{r:[],s:'[["open_menu"]]'}},{n:["popper_before_close"],t:70,f:""},{n:["popper_close"],t:70,f:{r:[],s:'[["close_menu"]]'}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"form-group mb-0 pl-1 pr-1",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"text",t:13},{n:"class",f:"form-control",t:13},{n:"autocomplete",f:"off",t:13},{n:"value",f:[{t:2,r:"text_value"}],t:13},{n:["keydown"],t:70,f:{r:[],s:'[["keydown"]]'}},{n:["click"],t:70,f:{r:["@event"],s:"[_0.stopPropagation()]"}},{n:"placeholder",f:[{t:2,r:"type_to_search"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"droplist-results",g:1},{n:"style",f:["max-height: ",{t:2,r:"maxheight"},"px; ",{t:2,x:{r:["show_list_on_open","text_value"],s:'_0||_1?"":"height:0px; margin-top:0px;"'}}],t:13}],f:[{t:4,f:[{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"javascript:;",t:13,g:1},{n:"class-selected",t:13,f:[{t:2,x:{r:["value","~/value"],s:"_0==_1"}}]},{n:"class-active",t:13,f:[{t:2,x:{r:["value","active_value"],s:"_0==_1"}}]},{n:["click"],t:70,f:{r:[],s:'[["set_selected"]]'}},{n:["mouseenter"],t:70,f:{r:[],s:'[["set_active"]]'}},{n:["mouseup"],t:70,f:{r:["@this","set_active"],s:'[_0.find("input").focus(),_1]'}}],f:[{t:8,r:"content"}]}],n:52,r:"filtered"},{t:4,f:[{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"javascript:;",t:13,g:1}],f:[{t:2,x:{r:["text_value","no_results"],s:'_0?_1:""'}}]}],n:51,l:1}]}]}]}," ",{t:7,e:"div",m:[{n:"error-holder-for",f:[{t:2,r:"name"}],t:13}]}]}],e:{'_0?"required":""':function(e){return e?"required":""},'_0?"required=\\"true\\" data-rule-not-zeros=\\"true\\"":""':function(e){return e?'required="true" data-rule-not-zeros="true"':""},'[{placement:"bottom-start",enable_arrows:false}]':function(){return[{placement:"bottom-start",enable_arrows:!1}]},'_0?"true":"false"':function(e){return e?"true":"false"},'_0?"disabled":""':function(e){return e?"disabled":""},'_0?_0:"&nbsp;"':function(e){return e||"&nbsp;"},'[["open_menu"]]':function(){return[["open_menu"]]},'[["close_menu"]]':function(){return[["close_menu"]]},'[["keydown"]]':function(){return[["keydown"]]},"[_0.stopPropagation()]":function(e){return[e.stopPropagation()]},'_0||_1?"":"height:0px; margin-top:0px;"':function(e,t){return e||t?"":"height:0px; margin-top:0px;"},"_0==_1":function(e,t){return e==t},'[["set_selected"]]':function(){return[["set_selected"]]},'[["set_active"]]':function(){return[["set_active"]]},'[_0.find("input").focus(),_1]':function(e,t){return[e.find("input").focus(),t]},'_0?_1:""':function(e,t){return e?t:""}}},css:" .hidden-out-of-view {position: absolute; top: -9999px; left: -9999px;} .droplist .btn{background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\"); background-repeat: no-repeat; background-size: 8px 10px; background-position: right 0.375rem center;} .droplist > .btn-secondary {padding-right:14px; overflow: hidden; text-overflow: ellipsis;} .droplist .droplist-results {margin-top: 5px; height: auto; overflow-x: hidden; border-top: none;} .droplist .dropdown-menu a.active {background-color: #eee; color: #212529} .droplist .dropdown-menu a.selected, .droplist .dropdown-menu a.active.selected {background-color: #ccc;} .droplist .dropdown-menu[x-placement=\"top-start\"] .droplist-results {margin-bottom: 38px; margin-top:0px;} .droplist .dropdown-menu[x-placement=\"top-start\"] .form-group {margin-bottom: 0px; position: absolute; bottom: 5px; width: 100%;} .droplist mark {background-color: #ffffcc; padding: 0;} input.is-invalid ~ .droplist > button {border: 1px solid red;}",data:function(){return{no_results:"No Results",type_to_search:"Type to search",label:"",class:"",menu_open:!1,list:[],value:"",active_value:"",text_value:"",show_list_on_open:!0,as_value:"value",as_text:"text",maxheight:210,add_search:"",fp:{required:!1,hidden:!1,disabled:!1},fp_event:null}},decorators:{popper:a.a},computed:{filtered:function(){var e=this.get("show_list_on_open"),o=this.get("text_value");return(e||!e&&0<o.length?this.get("list"):[]).reduce(function(e,t){var r={value:t[this.get("as_value")],text:t[this.get("as_text")]};if(r.add_search=t[this.get("add_search")]?t[this.get("add_search")]:"",0<=r.text.toUpperCase().indexOf(o.toUpperCase())||0<=r.add_search.toUpperCase().indexOf(o.toUpperCase())){var n=new RegExp(o,"i").exec(r.text);n&&0<n[0].length?r.text_highlighted=null!=n?r.text.replace(n[0],"<mark>"+n[0]+"</mark>"):r.text.replace(o,"<mark>"+o+"</mark>"):r.text_highlighted=r.text,e.push(r)}return e}.bind(this),[])},selected_text:function(){var t=this.get("value"),e=this.get("list").filter(function(e){return e[this.get("as_value")]==t}.bind(this));return 0<e.length?e[0][this.get("as_text")]:""},name:function(){return"dl_"+(e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],t=4294967296*Math.random()|0,r=4294967296*Math.random()|0,n=4294967296*Math.random()|0,o=4294967296*Math.random()|0,e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]);var e,t,r,n,o}},observe:{filtered:{handler:function(e,t,r,n){e&&this.find("[popper]").decorator.popper.scheduleUpdate()},init:!1}},on:{keydown:function(e){var t=e.original.keyCode;if(38===t||40===t){e.original.preventDefault();for(var r=this.get("filtered"),n=(this.get("value"),this.get("active_value")),o="",i=!1,a=0;a<r.length;a++)if(r[a].value==n){var s=38==t?-1:1;o=void 0!==r[a+s]?r[a+s].value:r[a].value,i=!0;break}var l=i?o:0<r.length?r[0].value:"";this.set("active_value",l);var d=this.find("a.active"),u=38===t?"previousSibling":"nextSibling";d&&d[u]&&c(d[u],{block:"nearest",inline:"nearest"})}13===t&&(e.original.preventDefault(),this.set("value",1==this.get("filtered").length?this.get("filtered.0.value"):this.get("active_value")),this.fire("change",e,{selected_line:e.get()}),this.find("[popper]").decorator.close(),this.find("button[popper-trigger]").focus())},set_selected:function(e){this.set("value",e.get("value")),this.fire("change",e,{selected_line:e.get()}),this.find("[popper]").decorator.close(),this.find("button[popper-trigger]").focus()},set_active:function(e){this.set("active_value",e.get("value"))},open_menu:function(e){this.set({active_value:this.get("value"),text_value:"",menu_open:!0}),this.find(".form-group > input").focus(),this.find("a.selected")&&c(this.find("a.selected"),{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},close_menu:function(){this.set("menu_open",!1)},change:function(){this.get("fp_event")&&this.exportFpData(this.find("input"),this.get("fp_event"))}}})}]).default});