!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RactiveDroplist=t():e.RactiveDroplist=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(){var e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],t=4294967296*Math.random()|0,n=4294967296*Math.random()|0,i=4294967296*Math.random()|0,o=4294967296*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=Ractive.extend({template:{v:4,t:[{t:7,e:"div",m:[{t:13,n:"class",f:"dropdown show",g:1}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"btn btn-secondary dropdown-toggle",g:1},{n:"type",f:"button",t:13,g:1},{n:"id",f:"dropdownMenuButton",t:13,g:1},{n:"data-toggle",f:"dropdown",t:13,g:1},{n:"aria-haspopup",f:"true",t:13,g:1},{n:"aria-expanded",f:"true",t:13,g:1}],f:["Dropdown button"]}," ",{t:7,e:"div",m:[{t:13,n:"style",f:"position: absolute; top: 40px; left: 0px;;",g:1},{t:13,n:"class",f:"dropdown-menu show",g:1}],f:[{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"#",t:13,g:1}],f:["Action"]}," ",{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"#",t:13,g:1}],f:["Another action"]}," ",{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"#",t:13,g:1}],f:["Something else here"]}]}]}]},css:"",data:function(){return{no_results:"No results",type_to_search:"Type here to search",label:"",class:"",menu_open:!1,list:[],value:"",active_value:"",text_value:"",show_list_on_open:!0,as_value:"value",as_text:"text",maxheight:210,add_search:"",fp:{required:!1,hidden:!1,disabled:!1},fp_event:null}},computed:{filtered:function(){var e=this.get("show_list_on_open"),t=this.get("text_value");return(e||!e&&t.length>0?this.get("list"):[]).reduce(function(e,n){var i={value:n[this.get("as_value")],text:n[this.get("as_text")]};if(i.add_search=n[this.get("add_search")]?n[this.get("add_search")]:"",i.text.toUpperCase().indexOf(t.toUpperCase())>=0||i.add_search.toUpperCase().indexOf(t.toUpperCase())>=0){var o=new RegExp(t,"i").exec(i.text);i.text_highlighted=null!=o?i.text.replace(o[0],"<mark>"+o[0]+"</mark>"):i.text.replace(t,"<mark>"+t+"</mark>"),e.push(i)}return e}.bind(this),[])},selected_text:function(){var e=this.get("value"),t=this.get("list"),n=t.filter(function(t){return t[this.get("as_value")]==e}.bind(this));return n.length>0?n[0][this.get("as_text")]:""},name:function(){return"dl_"+i()}},on:{keydown:function(e){var t=e.original.keyCode;if(38===t||40===t){e.original.preventDefault();for(var n=this.get("filtered"),i=(this.get("value"),this.get("active_value")),o="",a=!1,s=0;s<n.length;s++)if(n[s].value==i){var r=38==t?-1:1;o=void 0!==n[s+r]?n[s+r].value:n[s].value,a=!0;break}var d=a?o:n.length>0?n[0].value:"";this.set("active_value",d);var f=this.find("li.active"),c=f.offsetTop,l=f.clientHeight,u=this.find(".js-drop-list");38===t&&c<u.scrollTop&&(u.scrollTop-=l),40===t&&c+l>u.offsetHeight+u.scrollTop&&c+l<=u.scrollHeight&&(u.scrollTop+=l)}13===t&&(e.original.preventDefault(),this.set({value:1==this.get("filtered").length?this.get("filtered.0.value"):this.get("active_value"),menu_open:!1}),this.fire("change",e,{selected_line:e.get()}),this.find("button.droplist-toggle").focus())},set_selected:function(e){this.set({value:e.get("value"),menu_open:!1}),this.fire("change",e,{selected_line:e.get()}),this.find("button.droplist-toggle").focus()},set_active:function(e){this.set("active_value",e.get("value"))},open_menu:function(e){var t=this.find(".droplist.btn-group"),n=this.find(".js-drop-list"),i=this.find(".js-input-container");this.set({active_value:this.get("value"),text_value:"",menu_open:!0});var o=n.offsetHeight+i.offsetHeight,a=t.getBoundingClientRect().top;window.innerHeight-t.getBoundingClientRect().top-t.offsetHeight-o<0&&a-o>0?t.classList.add("droplistup"):t.classList.remove("droplistup"),this.find(".js-input-container > li > input").focus(),this.find("li.selected")&&(n.scrollTop=this.find("li.selected").offsetTop)},toggle_menu:function(e){0==this.get("menu_open")?this.fire("open_menu",e):this.set("menu_open",!1)},change:function(){this.get("fp_event")&&this.exportFpData(this.find("input"),this.get("fp_event"))}},events:{actionoutside:function(e,t){function n(n){27==n.keyCode&&t({node:e,original:n})}function i(n){e.contains(n.target)||t({node:e,original:n})}return document.addEventListener("click",i),document.addEventListener("keydown",n),{teardown:function(){document.removeEventListener("click",i),document.removeEventListener("keydown",n)}}}}})}]).default});