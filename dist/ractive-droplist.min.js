!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ractive"),require("popper.js")):"function"==typeof define&&define.amd?define(["ractive","popper.js"],t):"object"==typeof exports?exports.RactiveDroplist=t(require("ractive"),require("popper.js")):e.RactiveDroplist=t(e.Ractive,e.Popper)}(window,function(n,r){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){e.exports=n},function(e,t,n){var r;window,r=function(n){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),p=n.n(r);t.default=function(t,i){var n=this,a=t.querySelector("[popper-trigger]"),s=t.querySelector("[popper]");if(!0===(i=Object.assign({click_to_close:!0,enable_arrows:!0,popover:!1},i)).popover){var r=void 0;i.onCreate=function(e){e.instance.popper.classList.remove("bs-popover-"+e.originalPlacement),e.instance.popper.classList.add("bs-popover-"+e.placement)},i.onUpdate=function(e){r||(r=e.placement),r!=e.placement&&(e.instance.popper.classList.remove("bs-popover-"+r),e.instance.popper.classList.add("bs-popover-"+e.placement),r=e.placement)}}var o,l,c,d,u=s.decorator={popper:null,init:function(){a.addEventListener("click",u.toggle)},destroy:function(){a.removeEventListener("click",u.toggle),u.close()},click:function(e){!0===i.click_to_close?a.contains(e.target)||u.close():a.contains(e.target)||s.contains(e.target)||u.close()},keydown:function(e){if(i.enable_arrows&&(40==e.keyCode||38==e.keyCode)){if(e.preventDefault(),document.activeElement==a||document.activeElement==s){var t=s.querySelector("a.dropdown-item");return void(t&&t.focus())}if(s.contains(document.activeElement)&&"a"===document.activeElement.tagName.toLowerCase()&&document.activeElement.classList.contains("dropdown-item")){var n=!1,r=document.activeElement;"li"===document.activeElement.parentElement.tagName.toLowerCase()&&(r=document.activeElement.parentElement,n=!0);var o="nextElementSibling";for(38==e.keyCode&&(o="previousElementSibling"),r=r[o];r;)if(0!=r.offsetHeight){if(n){if(r.querySelector("a"))break}else{if(r&&!1===r.classList.contains("dropdown-divider")&&0==r.classList.contains("dropdown-header"))break;r&&r[o].classList.contains("dropdown-header")&&(r=r[o])}r=r[o]}else r=r[o];r&&(n?r.querySelector("a").focus():r.focus())}}27==e.keyCode&&(document.removeEventListener("keydown",u.keydown),u.close())},resize:(o=function(){s.classList.contains("dropdown-menu-rwd")&&!window.matchMedia("(max-width: 991px)").matches&&(window.removeEventListener("resize",u.resize),u.close())},l=350,function(){var e=this,t=arguments;clearTimeout(d),c&&!d&&o.apply(e,t),d=setTimeout(function(){d=null,c||o.apply(e,t)},l)}),open:function(){var e=n.getContext(s);e.raise("popper_before_open"),t.classList.add("show"),s.classList.add("show"),u.popper||(u.popper=new p.a(a,s,i)),document.addEventListener("click",u.click),document.addEventListener("keydown",u.keydown),window.addEventListener("resize",u.resize),e.raise("popper_open")},close:function(){var e=n.getContext(s);e.raise("popper_before_close"),t.classList.remove("show"),s.classList.remove("show"),u.popper&&u.popper.destroy(),u.popper=null,document.removeEventListener("click",u.click),document.removeEventListener("keydown",u.keydown),window.removeEventListener("resize",u.resize),e.raise("popper_close")},toggle:function(e){e.preventDefault(),t.classList.contains("show")?u.close():u.open()}};return s.decorator.init(),{teardown:function(){s.decorator.destroy()}}}}]).default},e.exports=r(n(2))},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i);function Y(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function s(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function F(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return s(n.overflowY,t)||s(n.overflowX,t)}return!1}function A(e,t,n,r,o,i,a,s){return i<e&&t<a||e<i&&a<t?0:i<=e&&s<=n||t<=a&&n<=s?i-e-r:t<a&&s<n||i<e&&n<s?a-t+o:0}var l=function(e,t){var n=t.scrollMode,r=t.block,o=t.inline,i=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof i?i:function(e){return e!==i};if(!Y(e))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,c=[],d=e;Y(d)&&s(d);){if((d=d.parentNode)===l){c.push(d);break}d===document.body&&F(d)&&!F(document.documentElement)||F(d,a)&&c.push(d)}for(var u=window.visualViewport?visualViewport.width:innerWidth,p=window.visualViewport?visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,h=e.getBoundingClientRect(),m=h.height,g=h.width,b=h.top,_=h.right,w=h.bottom,x=h.left,y="start"===r||"nearest"===r?b:"end"===r?w:b+m/2,k="center"===o?x+g/2:"end"===o?_:x,E=[],L=0;L<c.length;L++){var j=c[L],M=j.getBoundingClientRect(),O=M.height,C=M.width,S=M.top,q=M.right,P=M.bottom,z=M.left;if("if-needed"===n&&0<=b&&0<=x&&w<=p&&_<=u&&S<=b&&w<=P&&z<=x&&_<=q)return E;var T=getComputedStyle(j),W=parseInt(T.borderLeftWidth,10),H=parseInt(T.borderTopWidth,10),D=parseInt(T.borderRightWidth,10),R=parseInt(T.borderBottomWidth,10),U=0,B=0,I="offsetWidth"in j?j.offsetWidth-j.clientWidth-W-D:0,N="offsetHeight"in j?j.offsetHeight-j.clientHeight-H-R:0;if(l===j)U="start"===r?y:"end"===r?y-p:"nearest"===r?A(v,v+p,p,H,R,v+y,v+y+m,m):y-p/2,B="start"===o?k:"center"===o?k-u/2:"end"===o?k-u:A(f,f+u,u,W,D,f+k,f+k+g,g),U=Math.max(0,U+v),B=Math.max(0,B+f);else{U="start"===r?y-S-H:"end"===r?y-P+R+N:"nearest"===r?A(S,P,O,H,R+N,y,y+m,m):y-(S+O/2)+N/2,B="start"===o?k-z-W:"center"===o?k-(z+C/2)+I/2:"end"===o?k-q+D+I:A(z,q,C,W,D+I,k,k+g,g);var V=j.scrollLeft,X=j.scrollTop;y+=X-(U=Math.max(0,Math.min(X+U,j.scrollHeight-O+N))),k+=V-(B=Math.max(0,Math.min(V+B,j.scrollWidth-C+I)))}E.push({el:j,top:U,left:B})}return E};function c(e){return e===Object(e)&&0!==Object.keys(e).length}var u=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(c(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:l(e,t));if(!n){var r,o=!1===(r=t)?{block:"end",inline:"nearest"}:c(r)?r:{block:"start",inline:"nearest"};return function(e,o){void 0===o&&(o="auto");var i="scrollBehavior"in document.body.style;e.forEach(function(e){var t=e.el,n=e.top,r=e.left;t.scroll&&i?t.scroll({top:n,left:r,behavior:o}):(t.scrollTop=n,t.scrollLeft=r)})}(l(e,o),o.behavior)}};t.default=o.a.extend({template:{v:4,t:[{t:7,e:"div",m:[{n:"class",f:[{t:2,r:"class"}," droplist-container"],t:13},{n:"class-hidden",t:13,f:[{t:2,r:"fp.hidden"}]}],f:[{t:4,f:[{t:7,e:"label",m:[{n:"class",f:["oh nowrap-ellipsis ",{t:2,x:{r:["fp.required"],s:'_0?"required":""'}}],t:13}],f:[{t:2,r:"label"}]}],n:50,r:"label"}," ",{t:7,e:"input",m:[{n:"type",f:"text",t:13},{n:"name",f:[{t:2,r:"name"}],t:13},{n:"value",f:[{t:2,r:"value"}],t:13},{n:"class",f:"hidden-out-of-view",t:13},{n:"droplist-validator-field",f:0,t:13},{t:2,x:{r:["fp.required"],s:'_0?"required=\\"true\\" data-rule-not-zeros=\\"true\\"":""'}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"dropdown droplist",g:1},{n:"popper",t:71,f:{r:[],s:'[{placement:"bottom-start",enable_arrows:false}]'}}],f:[{t:7,e:"button",m:[{t:13,n:"class",f:"btn btn-sm btn-secondary w-100 text-left",g:1},{n:"type",f:"button",t:13,g:1},{n:"popper-trigger",f:0,t:13},{n:"aria-haspopup",f:"true",t:13,g:1},{n:"aria-expanded",f:[{t:2,x:{r:["menu_open"],s:'_0?"true":"false"'}}],t:13},{t:2,x:{r:["fp.disabled"],s:'_0?"disabled":""'}}],f:[{t:3,x:{r:["selected_text"],s:'_0?_0:"&nbsp;"'}}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"dropdown-menu w-100 pb-1 pt-1",g:1},{n:"popper",f:0,t:13},{n:["popper_before_open"],t:70,f:""},{n:["popper_open"],t:70,f:{r:[],s:'[["open_menu"]]'}},{n:["popper_before_close"],t:70,f:""},{n:["popper_close"],t:70,f:{r:[],s:'[["close_menu"]]'}}],f:[{t:7,e:"div",m:[{t:13,n:"class",f:"form-group mb-0 pl-1 pr-1",g:1}],f:[{t:7,e:"input",m:[{n:"type",f:"text",t:13},{n:"class",f:"form-control",t:13},{n:"autocomplete",f:"off",t:13},{n:"value",f:[{t:2,r:"text_value"}],t:13},{n:["keydown"],t:70,f:{r:[],s:'[["keydown"]]'}},{n:["click"],t:70,f:{r:["@event"],s:"[_0.stopPropagation()]"}},{n:"placeholder",f:[{t:2,r:"type_to_search"}],t:13}]}]}," ",{t:7,e:"div",m:[{t:13,n:"class",f:"droplist-results",g:1},{n:"style",f:["max-height: ",{t:2,r:"maxheight"},"px; ",{t:2,x:{r:["show_list_on_open","text_value"],s:'_0||_1?"":"height:0px; margin-top:0px;"'}}],t:13}],f:[{t:4,f:[{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"javascript:;",t:13,g:1},{n:"class-selected",t:13,f:[{t:2,x:{r:["value","~/value"],s:"_0==_1"}}]},{n:"class-active",t:13,f:[{t:2,x:{r:["value","active_value"],s:"_0==_1"}}]},{n:["click"],t:70,f:{r:[],s:'[["set_selected"]]'}},{n:["mouseenter"],t:70,f:{r:[],s:'[["set_active"]]'}},{n:["mouseup"],t:70,f:{r:["@this","set_active"],s:'[_0.find("input").focus(),_1]'}}],f:[{t:8,r:"content"}]}],n:52,r:"filtered"},{t:4,f:[{t:7,e:"a",m:[{t:13,n:"class",f:"dropdown-item",g:1},{n:"href",f:"javascript:;",t:13,g:1}],f:[{t:2,x:{r:["text_value","no_results"],s:'_0?_1:""'}}]}],n:51,l:1}]}]}]}," ",{t:7,e:"div",m:[{n:"error-holder-for",f:[{t:2,r:"name"}],t:13}]}]}],e:{'_0?"required":""':function(e){return e?"required":""},'_0?"required=\\"true\\" data-rule-not-zeros=\\"true\\"":""':function(e){return e?'required="true" data-rule-not-zeros="true"':""},'[{placement:"bottom-start",enable_arrows:false}]':function(){return[{placement:"bottom-start",enable_arrows:!1}]},'_0?"true":"false"':function(e){return e?"true":"false"},'_0?"disabled":""':function(e){return e?"disabled":""},'_0?_0:"&nbsp;"':function(e){return e||"&nbsp;"},'[["open_menu"]]':function(){return[["open_menu"]]},'[["close_menu"]]':function(){return[["close_menu"]]},'[["keydown"]]':function(){return[["keydown"]]},"[_0.stopPropagation()]":function(e){return[e.stopPropagation()]},'_0||_1?"":"height:0px; margin-top:0px;"':function(e,t){return e||t?"":"height:0px; margin-top:0px;"},"_0==_1":function(e,t){return e==t},'[["set_selected"]]':function(){return[["set_selected"]]},'[["set_active"]]':function(){return[["set_active"]]},'[_0.find("input").focus(),_1]':function(e,t){return[e.find("input").focus(),t]},'_0?_1:""':function(e,t){return e?t:""}}},css:" .hidden-out-of-view {position: absolute; top: -9999px; left: -9999px;} .droplist .btn{background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\"); background-repeat: no-repeat; background-size: 8px 10px; background-position: right 0.375rem center;} .droplist > .btn-secondary {padding-right:14px; overflow: hidden; text-overflow: ellipsis;} .droplist .droplist-results {margin-top: 5px; height: auto; overflow-x: hidden; border-top: none;} .droplist .dropdown-menu a.active {background-color: #eee; color: #212529} .droplist .dropdown-menu a.selected, .droplist .dropdown-menu a.active.selected {background-color: #ccc;} .droplist .dropdown-menu[x-placement=\"top-start\"] .droplist-results {margin-bottom: 38px; margin-top:0px;} .droplist .dropdown-menu[x-placement=\"top-start\"] .form-group {margin-bottom: 0px; position: absolute; bottom: 5px; width: 100%;} .droplist mark {background-color: #ffffcc; padding: 0;} input.is-invalid ~ .droplist > button {border: 1px solid red;}",data:function(){return{no_results:"No Results",type_to_search:"Type to search",label:"",class:"",menu_open:!1,list:[],value:"",active_value:"",text_value:"",show_list_on_open:!0,as_value:"value",as_text:"text",maxheight:210,add_search:"",fp:{required:!1,hidden:!1,disabled:!1},fp_event:null}},decorators:{popper:a.a},computed:{filtered:function(){var e=this.get("show_list_on_open"),o=this.get("text_value");return(e||!e&&0<o.length?this.get("list"):[]).reduce(function(e,t){var n={value:t[this.get("as_value")],text:t[this.get("as_text")]};if(n.add_search=t[this.get("add_search")]?t[this.get("add_search")]:"",0<=n.text.toUpperCase().indexOf(o.toUpperCase())||0<=n.add_search.toUpperCase().indexOf(o.toUpperCase())){var r=new RegExp(o,"i").exec(n.text);r&&0<r[0].length?n.text_highlighted=null!=r?n.text.replace(r[0],"<mark>"+r[0]+"</mark>"):n.text.replace(o,"<mark>"+o+"</mark>"):n.text_highlighted=n.text,e.push(n)}return e}.bind(this),[])},selected_text:function(){var t=this.get("value"),e=this.get("list").filter(function(e){return e[this.get("as_value")]==t}.bind(this));return 0<e.length?e[0][this.get("as_text")]:""},name:function(){return"dl_"+(e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],t=4294967296*Math.random()|0,n=4294967296*Math.random()|0,r=4294967296*Math.random()|0,o=4294967296*Math.random()|0,e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]);var e,t,n,r,o}},observe:{filtered:{handler:function(e,t,n,r){e&&this.find("[popper]").decorator.popper.scheduleUpdate()},init:!1}},on:{keydown:function(e){var t=e.original.keyCode;if(38===t||40===t){e.original.preventDefault();for(var n=this.get("filtered"),r=(this.get("value"),this.get("active_value")),o="",i=!1,a=0;a<n.length;a++)if(n[a].value==r){var s=38==t?-1:1;o=void 0!==n[a+s]?n[a+s].value:n[a].value,i=!0;break}var l=i?o:0<n.length?n[0].value:"";this.set("active_value",l);var c=this.find("a.active"),d=38===t?"previousSibling":"nextSibling";c&&c[d]&&u(c[d],{block:"nearest",inline:"nearest"})}13===t&&(e.original.preventDefault(),this.set("value",1==this.get("filtered").length?this.get("filtered.0.value"):this.get("active_value")),this.fire("change",e,{selected_line:e.get()}),this.find("[popper]").decorator.close(),this.find("button[popper-trigger]").focus())},set_selected:function(e){this.set("value",e.get("value")),this.fire("change",e,{selected_line:e.get()}),this.find("[popper]").decorator.close(),this.find("button[popper-trigger]").focus()},set_active:function(e){this.set("active_value",e.get("value"))},open_menu:function(e){this.set({active_value:this.get("value"),text_value:"",menu_open:!0}),this.find(".form-group > input").focus(),this.find("a.selected")&&u(this.find("a.selected"),{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},close_menu:function(){this.set("menu_open",!1)},change:function(){this.get("fp_event")&&this.exportFpData(this.find("input"),this.get("fp_event"))}}})}]).default});